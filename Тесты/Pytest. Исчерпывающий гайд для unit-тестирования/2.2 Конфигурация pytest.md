
**Конфигурация pytest.ini**  
Необходимо создать файл `pytest.ini` в корне проекта.  
Так же отделим код от тестов: создадим директорию _src_ и в ней файл example.py, в файл вынесем функцию find_elem_index. 
  
**Содержимое example.py:**
```python
def find_elem_index(text: str, element: str) -> int:
    """Находит индекс первого вхождения element в text."""
    return text.index(element)
```

Для тестов создадим отдельную директорию _tests_, в которую перенесем файл test_example.py с тестом.

**Содержимое example.py:**
```python
from src.example import find_elem_index


def test_find_elem_index():
    """Проверка функции find_elem_index"""
    assert find_elem_index("abcdef", "c") == 2
```

  
На текущем моменте структура нашего проекта выглядит следуюющим образом:
```

project/  
├── src/  
│   ├── __init__.py            
│   └── example.py      # Исходный код 
├── tests/              # Тесты  
│   ├── __init__.py     # Пустой файл (чтобы pytest видел tests как модуль)  
│   └── test_example.py  
├── test_venv/
└── pytest.ini          # Конфигурационный файл pytest  
```

```
**Содержимое pytest.ini:**

```ini
[pytest]
;Где искать тесты
testpaths = tests
;Шаблон для поиска тестов
python_files = "test_*.py"
; Дополнительные опции (-v — подробный вывод)
addopts = -v
```

**Ожидаемый результат:**  
Как видно в результате поменялся вывод тестов с `. -> PASSED`

![[Pasted image 20251016142910.png]]

Конфигурировать pytest можно при помощи pyproject.toml.
```toml
[tool.pytest.ini_options] 
addopts = "-v"
python_files = "test_*.py"
testpaths = "tests"
```

**Плюсы использования pyproject.toml**

**Единый файл** для всех инструментов (pytest, ruff, mypy, black, bandit, ...).  
**Совместимость** с современными проектами (PEP 517/518).  
**Удобство** — не нужно создавать отдельные файлы вроде pytest.ini