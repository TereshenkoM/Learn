Барбара Лисков написала следующие строки с формулировкой определение подтипов
```
Здесь потребуется что-то вроде следующего свойства подстановки: если для каждого объекта o1 типа S существует такой объект o2 типа Т, что для всех программ P, определённых в терминах Т, поведение P не изменяется при подстановки o1 вместо o2, то S является подтипом Т.
```

Чтобы понять эту идею, известную как принцип подстановки Барбары Лисков, рассмотрим несколько примеров.

### Руководство по использованию наследования
Представьте, что у нас есть класс с именем License, как показано на рисунке ниже
![[Pasted image 20251111181844.png]]

Этот дизайн соответствует принципу подстановки Барбары Лисков, потому что поведение приложения Billing не зависит от использования того или иного подтипа. Оба подтипа могут служить заменой для типа License.

### Проблема квадрат/прямоугольник

Классическим примером нарушения принципы подстановки Барбары Лисков может служить известная проблема квадрат/прямоугольник (рисунок ниже)
![[Pasted image 20251111182039.png]]

В этом примере Square неправильно определён как подтип класса Rectangle, потому что высоту и ширину прямоугольника можно изменять независимо, а высоту и ширину квадрата можно изменять только вместе. Поскольку класс User полагает, что взаимодействует с экземпляром Rectangle, его легко можно ввести в заблуждение как демонстрирует следующий код
```
Rectangle r = ...
r.setW(5);
r.setH(2);
assert(r.area()==10);
```

Если на место ... подставить код, создающий экземпляр Square, тогда проверка assert потерпит неудачу. Единственный способ противостоять такому виду нарушений принципы LSP - добавить в класс User механизм (например if) определяющий ситуацию, когда прямоугольник фактически является квадратом. **Так как поведение User зависит от используемых типов, эти типы не являются заменяемыми (совместимыми).**

На заре ООП LSP рассматривался как руководство по использованию наследования, как было показано в предыдущих разделах. Но со временем LSP был преобразован в более широкий принцип проектирования ПО, который распространяется также на интерфейсы и реализации.

### Заключение
Принцип подстановки Барбары Лисков может и должен распространяться до уровня архитектуры. Простое нарушение совместимости может вызвать загрязнение архитектуры системы значительным количеством дополнительных механизмов.
