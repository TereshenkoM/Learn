
Интеграция баз данных является важнейшим аспектом веб-приложений, поскольку она позволяет эффективно хранить, извлекать данные и управлять ими. FastAPI обеспечивает надежную поддержку интеграции **различных баз данных** в ваше приложение, позволяя вам беспрепятственно работать со структурированными данными.

Практический пример [[Реализация базовых задач]]
## Поддерживаемые базы данных в FastAPI

FastAPI поддерживает широкий спектр баз данных, включая:

- **SQLite**: Облегченная бессерверная база данных, которая хранит данные в локальном файле.
- **PostgreSQL**: Мощная система управления реляционными базами данных с открытым исходным кодом, известная своей производительностью и масштабируемостью. 
- **MySQL**: Популярная система реляционных баз данных, которая известна своей надёжностью.
- **MongoDB**: База данных NoSQL (нереляционная), которая хранит данные в гибких документах, подобных JSON.




## Подключение FastAPI к базе данных

Чтобы подключить FastAPI к базе данных, вам необходимо выполнить следующие общие действия:

- **Шаг 1: Установите драйвер базы данных**. Сначала установите соответствующий драйвер базы данных для выбранной вами базы данных. Например, если вы планируете использовать PostgreSQL, установите библиотеку `` `asyncpg` `` для асинхронного доступа или `` `psycopg2` `` для синхронного доступа.

- **Шаг 2: Импортируйте драйвер базы данных**. В вашем приложении FastAPI импортируйте необходимый модуль драйвера базы данных.

- **Шаг 3: Настройте подключение к базе данных**. Настройте параметры подключения к базе данных, такие как URL-адрес базы данных, имя пользователя, пароль и другие соответствующие конфигурации.

- **Шаг 4: Создайте сеанс работы с базой данных**. Создайте сеанс базы данных или пул подключений, который ваше приложение FastAPI может использовать для взаимодействия с базой данных.


## Выполнение операций CRUD

Как только ваше приложение FastAPI подключено к базе данных, вы можете выполнять операции CRUD (создавать, читать, обновлять, удалять) с вашими данными.

- **Создать (CREATE)**: Вставить новые записи данных в базу данных.
- **ЧИТАТЬ (READ)**: Извлекать данные из базы данных на основе определенных критериев.
- **ОБНОВИТЬ (UPDATE)**: Изменить существующие записи данных в базе данных.
- **УДАЛИТЬ (DELETE)**: Удалить записи данных из базы данных.





## Асинхронный доступ к базе данных

Встроенная поддержка _**асинхронного программирования**_ в FastAPI позволяет вам использовать преимущества асинхронного доступа к базе данных. Используя синтаксис `async/await` с запросами к базе данных, ваше приложение может эффективно обрабатывать несколько запросов одновременно, что приводит к повышению производительности и масштабируемости.

Обратите внимание, что некоторые базы данных не позволяют асинхронно выполнять операции с целью поддержания стабильности данных. Поэтому существует мнение о _**"неэффективности"**_ асинхронного программирования в Python (т.к. в конечном итоге приложение, которое может иметь сколько угодно потоков исполнения) все равно будет "ходить" в базу данных, которая все запросы будет обрабатывать по-очереди синхронно.

На следующем уроке мы углубимся в выполнение CRUD-операций и работу с базами данных в FastAPI.

_Примечание: При работе с базами данных в производственных приложениях не забывайте применять надлежащие меры безопасности, эффективно обрабатывать подключения к базе данных и оптимизировать запросы для обеспечения наилучшей производительности._

## Понимание процессов миграции баз данных

**Миграция** баз данных необходима при разработке схемы базы данных с течением времени без потери существующих данных. По мере роста и изменения веб-приложений схема базы данных может _нуждаться в обновлениях_ для соответствия новым функциям или требованиям к данным.

**Alembic** - это мощный инструмент миграции баз данных, который легко работает с FastAPI, позволяя вам управлять изменениям и схемы базы данных контролируемым и версионным образом. Стоит отметить, что автором этого инструмента является автор SQLAlchemy, которая является **одной из самых** популярных ORM-ок в питоне. Поэтому покажем на примере этой ORM-ки.


## Немного о Alembic

TODO чуть позже написать