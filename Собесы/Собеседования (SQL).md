### Какие недостатки индексации таблиц вы можете привести?

Основные минусы индексов: уменьшение скорости записи данных и занимаемое пространство на жестком диске.

**ПОДРОБНО**
Недостатки индексации:

1. **Увеличение времени на внесение изменений**: Каждый раз, когда вы вносите изменения в данные (вставка, удаление, обновление), SQL сервер должен также обновить соответствующие индексы. Это может значительно увеличить время выполнения операций записи.
2. **Занимаемое дисковое пространство**: Индексы занимают дополнительное пространство на диске. В зависимости от размера таблицы и количества и типа индексов, это может значительно увеличить потребление дискового пространства базой данных.
3. **Сложность администрирования**: Наличие большого количества индексов может усложнить администрирование базы данных. Требуется регулярно анализировать и оптимизировать индексы, что может потребовать дополнительных ресурсов и времени администратора.
4. **Производительность при чтении**: Хотя индексы обычно улучшают производительность чтения, слишком много индексов может привести к выбору неоптимального плана выполнения запроса, что ухудшит производительность. Индексы также могут вызвать дополнительные затраты при чтении, если данные разбросаны по разным частям диска (фрагментация).
5. **Обслуживание индексов**: С течением времени индексы могут становиться фрагментированными, особенно если в таблице происходят частые операции вставки, удаления и обновления. Фрагментированные индексы требуют регулярного обслуживания (дефрагментации), что также требует времени и ресурсов.
6. **Выбор индексов**: Правильный выбор индексов не всегда очевиден. Неправильно сконфигурированные или избыточные индексы могут снизить производительность системы вместо её повышения.
7. **Зависимость от конкретных запросов**: Эффективность индекса зависит от типов выполняемых запросов. Индекс, который хорошо работает для одного типа запросов, может быть бесполезен или даже вреден для других.

### Какие виды индексов существуют в PostgreSQL?
В PostgreSQL есть несколько типов индексов, каждый из которых предназначен для разных типов запросов. Основные из них: 
**B-tree** (индекс по умолчанию, поддерживает точные и диапазонные запросы)
**Hash** (эффективен для точных совпадений), 
**GIN** (для полнотекстового поиска и работы с массивами),
**GiST** (для многомерных данных, таких как географические координаты), 
**BRIN** (оптимизирован для больших таблиц с отсортированными данными)

### Что такое транзакция в SQL и какими свойствами она должна обладать?

Транзакция в SQL - это последовательность операций базы данных, которая рассматривается как единое целое и либо выполняется полностью, либо не выполняется вовсе.

Транзакции должны обладать свойствами ACID:

- атомарность (все операции выполняются как единое целое),
- согласованность (база данных остается в согласованном состоянии),
- изоляция (одна транзакция не видит изменений, внесенных другими транзакциями до их завершения),
- устойчивость (изменения, внесенные в базу данных, сохраняются даже в случае сбоя системы).


ACID — это аббревиатура, обозначающая четыре ключевых свойства транзакций в базах данных: атомарность (Atomicity), согласованность (Consistency), изолированность (Isolation) и долговечность (Durability).

- атомарность (Atomicity)
- согласованность (Consistency)
- изолированность (Isolation)
- долговечность (Durability).

#### Атомарность

Атомарность означает, что транзакция либо выполняется полностью, либо не выполняется вовсе. Если что-то пошло не так в процессе выполнения, все изменения откатываются, и база данных остается в прежнем состоянии.

**Пример**: Представьте перевод денег между двумя счетами. Если деньги списались с одного счета, но не поступили на другой из-за ошибки, вся операция отменяется, и деньги остаются на первом счете.

#### Согласованность

Согласованность гарантирует, что данные переходят из одного допустимого состояния в другое. Транзакция не должна нарушать ограничения базы данных, такие как уникальные ключи, внешние ключи или правила проверки данных.

**Пример**: Если у вас есть правило, что баланс на банковском счете не может быть отрицательным, то транзакция, которая нарушает это правило, не будет завершена. После каждой транзакции база данных должна оставаться в состоянии, удовлетворяющем всем правилам и ограничениям.

#### Изолированность

Изолированность гарантирует, что параллельные транзакции не влияют друг на друга. Результат выполнения нескольких транзакций будет таким же, как если бы они выполнялись последовательно. Это предотвращает конфликты при одновременном доступе к одним и тем же данным.

**Пример**: Представьте, что два человека одновременно пытаются изменить баланс на одном счете. Изолированность гарантирует, что одна транзакция завершится раньше, чем вторая начнет менять те же данные, предотвращая ошибку, при которой деньги могут быть зачислены или списаны дважды.

#### Долговечность

Долговечность означает, что после успешного завершения транзакции ее результаты сохраняются в базе данных, даже если происходит сбой системы. Это значит, что данные не теряются и остаются доступными после любых ошибок, таких как сбой питания.


### В чем разница между транзакцией и batch?

Транзакция — это единичная операция или группа операций, которые должны быть выполнены атомарно, то есть все или ничего. Batch (пакетная обработка) — это группа операций, выполняемых последовательно или параллельно без обязательств атомарности, обычно для оптимизации производительности при больших объемах данных.

### Почему b-tree выбран индексом по умолчанию в большинстве СУБД, например, в PostgreSQL?

B-tree является индексом по умолчанию, потому что он обеспечивает оптимальный баланс между эффективностью поиска, вставки, удаления и поддержанием отсортированности данных. Его структура хорошо масштабируется как для чтения, так и для записи данных, что делает его идеальным выбором для использования в реляционных базах данных, где важны производительность и эффективность.

### Что такое индексы в SQL? Зачем они нужны?

Индексы в SQL - это структуры данных, используемые для ускорения выполнения запросов к базе данных. Они создаются на столбцах таблицы для быстрого доступа к данным.

###  Что такое нормализация и каковы ее преимущества?

Нормализация — процесс организации данных, цель которого избежать дублирования и избыточности. Некоторые из преимуществ:

- Лучшая организация базы данных
- Больше таблиц с небольшими строками
- Эффективный доступ к данным
- Большая гибкость для запросов
- Быстрый поиск информации
- Проще реализовать безопасность данных
- Позволяет легко модифицировать
- Сокращение избыточных и дублирующихся данных
- Более компактная база данных
- Обеспечивает согласованность данных после внесения изменений

### Какие уровни нормализации есть в SQL?

В SQL существует пять уровней нормализации, которые обеспечивают структурную эффективность баз данных: первая, вторая, третья, четвёртая и пятая нормальные формы (1NF, 2NF, 3NF, 4NF и 5NF).

### Что такое денормализация и когда её целесообразно использовать?

Денормализация базы данных — это процесс преднамеренного добавления избыточных данных в структуру базы данных для улучшения скорости и производительности запросов. Она предполагает объединение данных из связанных таблиц в одну, что сокращает количество соединений (`JOIN`) и ускоряет чтение данных, но может увеличить объем данных и сложность обновлений.