
Есть 3 наиболее нормальных форм (НФ) - 1 НФ, 2НФ, 3НФ. Соответственно есть и другие НФ, но они используются реже.

Нормальная форма - по сути совокупность правил и критерий накладываемых на структуру БД, которые соответствуют здравому смыслу, уменьшая избыточность данных и улучшает целостность данных.

### На примере таблиц из интернет магазине
#### 1НФ
* Каждый атрибут содержит только 1 значение

**Например**
Таблица ниже нарушает 1НФ. В products больше 1 значения.

![[Pasted image 20250820212437.png]]

Нормализуем

![[Pasted image 20250820212508.png]]
Теперь мы храним ссылку на **товары в заказе**, а не храним id продуктов в таблице заказы.

**Примечание**
Хранение json и jsonb - нарушает 1НФ.


#### 2НФ
* Если таблица находится в 1НФ
* Отсутствуют зависимости от части первичного ключа. То есть все колонки целиком зависят от первичного ключа

**Например**
product_name зависит от идентификатора продукта (product_id) , но не зависит от идентификатора заказа (order_id)
![[Pasted image 20250820212845.png]]

Нормализуем

![[Pasted image 20250820212951.png]]

Вынесем товары в отдельную таблицу и будем ссылаться из таблицы Товары в заказе к таблице Товары.

**Примечание**
Самое интересное то, что дублирование price не является нарушением 2НФ. Дело в том, что на товары в заказе может действовать скидка, промокод и так далее. Следовательно кажется логичным хранить итоговую стоимость с учётом всего вышеперечисленного в таблице  Товары в заказе.

#### 3НФ
* Находится в 2НФ
* В ней отсутствуют транзитивные зависимости. То есть нет колонок которые зависят не от первичного ключа, а от другой колонки.

**Например**
![[Pasted image 20250820213536.png]]

delivery_method_name зависит от delivery_method_name, а delivery_method_id зависит order_id.

Нормализуем

![[Pasted image 20250820213743.png]]

Теперь транзитивных зависимостей нет!