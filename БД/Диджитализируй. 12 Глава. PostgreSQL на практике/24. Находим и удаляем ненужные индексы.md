Postgresql сохраняет статистику использования индексов и позволяет её смотреть. Можно найти неиспользуемые индексы и просто их удалить.

Пример

Создадим таблицу и наполним её данными
```postgresql
drop table if exists client;

create table client (
    client_id bigint generated always as identity primary key,
    first_name varchar(50) not null,
    last_name varchar(50) not null,
    sex char(1) not null check (sex in ('m', 'f'))
);

insert into client (first_name, last_name, sex)
select
  substring(md5(random()::text) || md5(random()::text)
            from 1 for (floor(random() * 46)::int + 5)),
  substring(md5(random()::text) || md5(random()::text)
            from 1 for (floor(random() * 46)::int + 5)),
  case when random() < 0.5 then 'm' else 'f' end
from generate_series(1, 10000000);
```

Создадим индекс
```postgresql
create index client_sex_idx on client(sex);
```

Сделаем vacuum analyze (чтобы создать статистику по табличке client).
```postgresql
vacuum analyze client;
```

И сделаем такую выборку. Она покажет неиспользуемые индексы.
```postgresql
select schemaname, relname, indexrelname, idx_scan
from pg_stat_user_indexes
where idx_scan = 0;
```

Также мы можем указать нужную таблицу в фильтрации при выборке
```postgresql
select schemaname, relname, indexrelname, idx_scan
from pg_stat_user_indexes
where idx_scan = 0 and relname='client';
_________

public	client	client_pkey	0
public	client	client_sex_idx	0
```

Попробуем выполнить запрос с использованием индекса и сделать тот же запрос. Как видим client_pkey теперь нет (так как он использовался ранее).
```postgresql
select * from client where client_id=123456;

select schemaname, relname, indexrelname, idx_scan
from pg_stat_user_indexes
where idx_scan = 0 and relname='client';
______
public	client	client_sex_idx	0
```

Ну и соответственно ненужный индекс можно удалить
```postgresql
drop index client_sex_idx;
```


**Важно понимать две вещи**
1. Статистику можно очищать. Поэтому её нужно смотреть когда сервер в проде уже долго крутится и статистику не очищали.
2. Некоторые индексы могут использоваться исключительно для обеспечения ограничений (например unique index для уникальности). При выборке они не используются, поэтому статистика может показать 0, но в реальности он используется.